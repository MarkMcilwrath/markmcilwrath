<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" content="width=device-width, initial-scale=1">
	    <title>Report Menu</title>

		<link rel="shortcut icon" href="#">
	    <script src="https://unpkg.com/@popperjs/core@2"></script>
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	    <link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet">
	    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>
	    <script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.0.5/jspdf.plugin.autotable.js"></script>
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	    <link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet">
	    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>
	    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

	    <script src="../../chart/node_modules/chart.js/dist/chart.js"></script>

	    <link rel="stylesheet" href="../../project.css">

	     <script>
	    	$(function(){
	    		$("#includedContent").load("./adminMenu2.html");
	        });
	    </script>
</head>
<body>
	<div id="includedContent"></div>
	<div class="container">
   		<div class="center">
   			<div class="menuButtonHolder">
                <button type="button" class="btn btn-primary btn-lg btn-block"  onclick="assetLocationReport()" >Asset Location Report</button>
            </div>
        </div>
    </div>

    <div class="container">
   		<div class="center">
   			<div class="menuButtonHolder">
                <button type="button" class="btn btn-primary btn-lg btn-block"  onclick="assetDepartmentReport()" >Asset Department Report</button>
            </div>
        </div>
    </div>

    <div id="assetLocationReportModal" class="modal fade" role="dialog">
	    <div class="modal-dialog modal-dialog-scrollable modal-lg">
	        <div class="modal-content">
	            <div class="modal-header">
	                <h4 class="modal-title">Asset Locations</h4>
	            </div>
	            <div class="modal-body">
	            	<div id="assetLocationPiechart" style="width: 1500px; height: 1000px;"></div>
	            </div>
	            <div class="modal-footer">
	                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	            </div>
	        </div>
	    </div>
	</div>

	<div id="assetDepartmentReportModal" class="modal fade" role="dialog">
	    <div class="modal-dialog modal-dialog-scrollable modal-lg">
	        <div class="modal-content">
	            <div class="modal-header">
	                <h4 class="modal-title">Asset Locations</h4>
	            </div>
	            <div class="modal-body">
	            	<div id="assetDepartmentPiechart" style="width: 1500px; height: 1000px;"></div>
	            </div>
	            <div class="modal-footer">
	                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	            </div>
	        </div>
	    </div>
	</div>

</body>

<script>
	google.charts.load('current', {'packages':['corechart']});

	var belfastAssetCounter;
	var dublinAssetCounter ;
	var cardiffAssetCounter;
	var londonAssetCounter;
	var edinburghAssetCounter;

	var assetLocationDataArray;

	var financeAssetCounter;
	var salesAssetCounter;
	var facilitiesAssetCounter;
	var iTAssetCounter;
	var manufacturingAssetCounter;
	var logisitcsAssetCounter;

	var assetDepartmentDataArray;

	function assetLocationReport()
		{
			belfastAssetCounter = 0;
			dublinAssetCounter = 0;
			cardiffAssetCounter= 0;
			londonAssetCounter= 0;
			edinburghAssetCounter= 0;
			getAssetLocationStats();
			google.charts.setOnLoadCallback(drawAssetLocationChart);
			drawAssetLocationChart();
			$("#assetLocationReportModal").modal("toggle");
		}

	function getAssetLocationStats()
		{
			var xmlHttp = new XMLHttpRequest();
			var theURL = "http://localhost:8080/asset_assign"
			xmlHttp.onreadystatechange = function()
	            {
	                if (this.readyState == 4 && this.status == 200)
	                {
	                 var myList1 = (this.responseText);
	                 var localTD = JSON.parse(myList1);

	                 for (var i = 0; i < localTD.length; i++)
	                 {
	                 	for (var x = 0; x < localTD[i].tagSet.length; x++)
	                 	{
	                 		switch (localTD[i].tagSet[x].tagValue)
	                 		{
	                 			case "Belfast":
	                 			belfastAssetCounter++;
	                 			break;

	                 			case "Dublin":
	                 			dublinAssetCounter++;
	                 			break;

	                 			case "London":
	                 			londonAssetCounter++;
	                 			break;

	                 			case "Edinburgh":
	                 			edinburghAssetCounter++;
	                 			break;

	                 			case "Cardiff":
	                 			cardiffAssetCounter++;
	                 			break;
	                 			default:
	                 			
	                 		}

	                 		assetLocationDataArray =[
	                 		['Key', 'Value'],
	          				['Belfast',     belfastAssetCounter],
	         				['Dublin',      dublinAssetCounter],
					        ['London',  londonAssetCounter],
					        ['Edinburgh', edinburghAssetCounter],
					        ['Cardiff',    cardiffAssetCounter]
					        ];

					        console.log(assetLocationDataArray);
	                 	}
	                 }
	                }
	            };
	            xmlHttp.open("GET", theURL , true);
	            xmlHttp.send();
		}

	function drawAssetLocationChart()
		{
	        var data = google.visualization.arrayToDataTable(assetLocationDataArray);
	        var options = {
	          title: 'location of Assets'
	        };
	        var chart = new google.visualization.PieChart(document.getElementById('assetLocationPiechart'));
	        chart.draw(data, options);
    	}

    function assetDepartmentReport()
		{
			financeAssetCounter = 0;
			salesAssetCounter = 0;
			facilitiesAssetCounter= 0;
			iTAssetCounter= 0;
			manufacturingAssetCounter= 0;
			logisitcsAssetCounter=0;

			getAssetDepartmentStats();
			google.charts.setOnLoadCallback(drawAssetDepartmentChart);
			drawAssetDepartmentChart();
			$("#assetDepartmentReportModal").modal("toggle");
		}
    
    function getAssetDepartmentStats()
		{
			var xmlHttp = new XMLHttpRequest();
			var theURL = "http://localhost:8080/asset_assign"
			xmlHttp.onreadystatechange = function()
	            {
	                if (this.readyState == 4 && this.status == 200)
	                {
	                 var myList1 = (this.responseText);
	                 var localTD = JSON.parse(myList1);

	                 for (var i = 0; i < localTD.length; i++)
	                 {
	                 	for (var x = 0; x < localTD[i].tagSet.length; x++)
	                 	{
	                 		switch (localTD[i].tagSet[x].tagValue)
	                 		{
	                 			case "Finance":
	                 			financeAssetCounter++;
	                 			break;

	                 			case "Sales":
	                 			salesAssetCounter++;
	                 			break;

	                 			case "Facilities":
	                 			facilitiesAssetCounter++;
	                 			break;

	                 			case "IT":
	                 			iTAssetCounter++;
	                 			break;

	                 			case "Manufacturing":
	                 			manufacturingAssetCounter++;
	                 			break;

	                 			case "Logisitcs":
	                 			logisitcsAssetCounter++;
	                 			break;
	                 			default:
	                 			
	                 		}
	                 	}

	                 		assetDepartmentDataArray =[
	                 		['Key', 'Value'],
	          				['Finance',     financeAssetCounter],
	         				['Sales',      salesAssetCounter],
	         				['Facilities',      facilitiesAssetCounter],
					        ['IT',  iTAssetCounter],
					        ['Manufacturing', manufacturingAssetCounter],
					        ['Logisitcs',    logisitcsAssetCounter]
					        ];

					        console.log(assetDepartmentDataArray);
	                 }
	                }
	            };
	            xmlHttp.open("GET", theURL , true);
	            xmlHttp.send();
		}

	function drawAssetDepartmentChart()
		{
	        var data = google.visualization.arrayToDataTable(assetDepartmentDataArray);
	        var options = {
	          title: 'Department of Assets'
	        };
	        var chart = new google.visualization.PieChart(document.getElementById('assetDepartmentPiechart'));
	        chart.draw(data, options);
    	}
</script>
</html>